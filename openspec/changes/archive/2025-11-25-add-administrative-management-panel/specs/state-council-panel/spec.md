## ADDED Requirements

### Requirement: Administrative Management Panel

國務院面板必須（MUST）提供「行政管理」按鈕，點擊後發送新的 ephemeral 嵌入訊息面板，用於管理各部門領導人的身分組設定。此功能僅限國務院領袖使用。

#### Scenario: 行政管理按鈕僅限領袖可見

- **GIVEN** 使用者開啟國務院面板
- **AND** 使用者為國務院領袖
- **WHEN** 總覽頁面載入時
- **THEN** 顯示「行政管理」按鈕

#### Scenario: 非領袖無法看到行政管理按鈕

- **GIVEN** 使用者開啟國務院面板
- **AND** 使用者不是國務院領袖（僅為部門授權人員）
- **WHEN** 總覽頁面載入時
- **THEN** 不顯示「行政管理」按鈕

#### Scenario: 點擊行政管理按鈕發送新嵌入訊息

- **GIVEN** 國務院領袖在總覽頁面
- **WHEN** 點擊「行政管理」按鈕
- **THEN** 系統發送新的 ephemeral 嵌入訊息
- **AND** 嵌入訊息包含所有部門的當前領導人設定狀態
- **AND** 嵌入訊息附帶行政管理互動元件（下拉選單）

#### Scenario: 行政管理面板顯示當前部門領導人狀態

- **GIVEN** 行政管理面板已開啟
- **AND** 內政部領導人身分組已設定為「內政部長」
- **AND** 財政部領導人身分組未設定
- **WHEN** 面板載入時
- **THEN** 嵌入訊息顯示「內政部：@內政部長」
- **AND** 嵌入訊息顯示「財政部：未設定」

#### Scenario: 行政管理面板提供部門選擇下拉選單

- **GIVEN** 行政管理面板已開啟
- **WHEN** 查看互動元件
- **THEN** 顯示部門選擇下拉選單
- **AND** 選項包含：內政部、財政部、國土安全部、中央銀行、法務部

#### Scenario: 選擇部門後可選擇領導人身分組

- **GIVEN** 行政管理面板已開啟
- **AND** 使用者從部門下拉選單選擇「內政部」
- **WHEN** 系統處理選擇
- **THEN** 顯示領導人身分組選擇下拉選單（RoleSelect）

#### Scenario: 設定部門領導人成功

- **GIVEN** 使用者已選擇部門「內政部」
- **AND** 使用者從身分組選擇器選擇「@內政部長」身分組
- **WHEN** 系統處理設定
- **THEN** 系統儲存部門領導人設定
- **AND** 顯示成功訊息「已更新 內政部 領導人身分組為 @內政部長」
- **AND** 嵌入訊息內容刷新以反映新設定

#### Scenario: 清除部門領導人設定

- **GIVEN** 使用者已選擇部門「財政部」
- **AND** 使用者在身分組選擇器中不選擇任何身分組（min_values=0）
- **WHEN** 系統處理設定
- **THEN** 系統清除該部門的領導人設定
- **AND** 顯示成功訊息「已更新 財政部 領導人身分組為 未設定」
- **AND** 嵌入訊息內容刷新顯示「財政部：未設定」

### Requirement: Administrative Management Panel Real-time Updates

行政管理面板必須（MUST）支援實時更新，當部門領導人設定變更時自動刷新顯示內容。

#### Scenario: 設定變更後面板自動刷新

- **GIVEN** 行政管理面板已開啟
- **AND** 面板已訂閱 State Council 事件
- **WHEN** 部門領導人設定變更事件發生
- **THEN** 嵌入訊息內容自動刷新以顯示最新的部門領導人狀態

#### Scenario: 面板超時後取消事件訂閱

- **GIVEN** 行政管理面板已開啟
- **AND** 面板已訂閱 State Council 事件
- **WHEN** 面板因超時被停止
- **THEN** 系統取消事件訂閱
- **AND** 釋放相關資源
