# Design: 個人面板

## Context

DRoASMS 目前提供多種治理面板（理事會、國務院、最高人民會議），但缺少面向一般成員的個人經濟管理介面。使用者需要分別使用 `/balance`、`/transfer`、`/history` 等指令，缺乏統一入口。

## Goals / Non-Goals

### Goals

- 提供統一的個人經濟資訊入口
- 支援快速查看餘額和交易歷史
- 支援便捷的轉帳操作（對使用者或政府部門）
- 遵循現有面板的 UI/UX 模式

### Non-Goals

- 不改變現有的經濟系統邏輯
- 不新增資料庫表格（複用現有結構）
- 不提供管理員功能（如 adjust）

## Decisions

### 1. 面板結構：三分頁設計

採用與其他面板一致的分頁設計：

- **首頁**：顯示用戶名稱、當前餘額、快速操作按鈕
- **財產**：交易歷史記錄（使用 `EmbedPaginator` 分頁）
- **轉帳**：轉帳操作介面

**理由**：與現有面板保持一致的用戶體驗，降低學習成本。

### 2. 轉帳收款人選擇：下拉式選單

- **轉帳給使用者**：使用 `UserSelect` 元件
- **轉帳給政府部門**：使用 `StringSelect` 元件，選項從 `department_registry` 動態載入

**理由**：

- 使用者選擇使用 Discord 原生 `UserSelect`，支援搜尋和 mention
- 部門選擇使用 `StringSelect`，因為部門是系統預定義的，數量有限

### 3. 轉帳流程：Modal 輸入

點擊轉帳按鈕後：

1. 先選擇收款人（下拉選單）
2. 再彈出 Modal 輸入金額和備註
3. 確認後執行轉帳

**理由**：分步驟操作可減少錯誤輸入，Modal 提供良好的表單輸入體驗。

### 4. 複用現有服務

直接複用：

- `BalanceService`：查詢餘額
- `TransferService`：執行轉帳
- `HistoryService`：查詢交易歷史
- `CurrencyConfigService`：取得貨幣配置

**理由**：避免重複實作，確保與現有功能行為一致。

## Risks / Trade-offs

| 風險                         | 緩解措施                                     |
| ---------------------------- | -------------------------------------------- |
| 部門列表過長導致下拉選單難用 | 僅顯示已設定的部門，最多 25 個選項           |
| 使用者列表過長               | 使用 Discord 原生 `UserSelect`，內建搜尋功能 |
| 轉帳失敗時用戶體驗           | 提供清晰的錯誤訊息，說明失敗原因             |

## Open Questions

- ~~是否需要顯示使用者的總資產排名？~~ → 暫不實作，避免增加複雜度
