## ADDED Requirements

### Requirement: Interior Affairs - Business License Management

內政部必須（MUST）提供商業許可管理功能，允許授權人員審批並發放商業許可給指定用戶。每個商業許可必須（MUST）包含許可類型、有效期限和核發資訊。

#### Scenario: 發放商業許可成功

- **GIVEN** 具備內政部權限的人員
- **AND** 目標用戶尚未擁有相同類型的有效許可
- **WHEN** 在面板中選擇目標用戶、許可類型並確認發放
- **THEN** 系統建立商業許可記錄
- **AND** 記錄核發人員、核發時間和有效期限

#### Scenario: 重複許可被拒絕

- **GIVEN** 目標用戶已擁有相同類型的有效商業許可
- **WHEN** 嘗試發放相同類型許可
- **THEN** 系統拒絕操作並提示該用戶已持有有效許可

#### Scenario: 許可類型驗證

- **GIVEN** 內政部定義了有效的許可類型列表
- **WHEN** 嘗試發放許可
- **THEN** 系統驗證許可類型為有效選項

### Requirement: Business License Revocation

內政部必須（MUST）提供商業許可撤銷功能，允許授權人員撤銷已發放的商業許可。撤銷操作必須（MUST）記錄撤銷原因和撤銷時間。

#### Scenario: 撤銷商業許可成功

- **GIVEN** 具備內政部權限的人員
- **AND** 目標用戶擁有有效的商業許可
- **WHEN** 選擇該許可並執行撤銷操作
- **THEN** 系統將許可狀態更新為已撤銷
- **AND** 記錄撤銷人員、時間和原因

#### Scenario: 撤銷不存在的許可被拒絕

- **GIVEN** 目標用戶沒有指定的商業許可
- **WHEN** 嘗試撤銷許可
- **THEN** 系統拒絕操作並提示許可不存在

### Requirement: Business License Query

系統必須（MUST）提供商業許可查詢功能，允許內政部領導人和國務院領袖查看所有擁有商業許可的用戶列表。查詢結果必須（MUST）支援依許可類型和狀態篩選。

#### Scenario: 內政部領導人查看許可列表

- **GIVEN** 具備內政部首長身分組的使用者
- **WHEN** 在內政部頁籤查看商業許可列表
- **THEN** 系統顯示所有已發放商業許可的用戶清單
- **AND** 每筆記錄顯示：用戶名稱、許可類型、核發日期、有效期限、狀態

#### Scenario: 國務院領袖查看許可列表

- **GIVEN** 國務院領袖
- **WHEN** 在面板中查看商業許可列表
- **THEN** 系統顯示所有部門的商業許可記錄

#### Scenario: 依許可類型篩選

- **GIVEN** 授權使用者在許可列表頁面
- **WHEN** 選擇特定許可類型進行篩選
- **THEN** 系統僅顯示符合該類型的許可記錄

#### Scenario: 依許可狀態篩選

- **GIVEN** 授權使用者在許可列表頁面
- **WHEN** 選擇特定狀態（有效/已過期/已撤銷）進行篩選
- **THEN** 系統僅顯示符合該狀態的許可記錄

### Requirement: Business License Audit Trail

系統必須（MUST）記錄所有商業許可相關操作，包括發放、撤銷和狀態變更，並整合至現有的國務院稽核系統。

#### Scenario: 許可發放審計記錄

- **GIVEN** 執行商業許可發放操作
- **THEN** 系統記錄：操作類型（發放）、操作人員、目標用戶、許可類型、時間戳

#### Scenario: 許可撤銷審計記錄

- **GIVEN** 執行商業許可撤銷操作
- **THEN** 系統記錄：操作類型（撤銷）、操作人員、目標用戶、許可類型、撤銷原因、時間戳

#### Scenario: 審計記錄可匯出

- **GIVEN** 具備稽核權限的人員
- **WHEN** 請求匯出商業許可操作記錄
- **THEN** 系統產出指定期間的許可操作記錄檔案
