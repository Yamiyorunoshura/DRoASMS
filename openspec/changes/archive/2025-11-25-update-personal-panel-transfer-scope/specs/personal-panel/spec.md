## MODIFIED Requirements

### Requirement: Transfer To Government Department From Personal Panel

個人面板必須（MUST）提供「轉帳給政府部門」功能，使用下拉式選單選擇收款機構，支援常任理事會、最高人民會議、國務院及其下屬部門。

#### Scenario: 點擊轉帳給政府部門按鈕

- **WHEN** 成員在轉帳分頁點擊「轉帳給政府部門」按鈕
- **THEN** 系統顯示政府機構選擇下拉選單（StringSelect）
- **AND** 下拉選單包含所有已設定的政府機構

#### Scenario: 政府機構選項來源

- **GIVEN** 該 guild 已設定常任理事會、最高人民會議和國務院（包含內政部、財政部、國土安全部、中央銀行、法務部）
- **WHEN** 成員點擊「轉帳給政府部門」按鈕
- **THEN** 下拉選單顯示以下選項：
  - 常任理事會（👑）
  - 最高人民會議（🏛️）
  - 國務院（🏛️）
  - 內政部（🏘️）
  - 財政部（💰）
  - 國土安全部（🛡️）
  - 中央銀行（🏦）
  - 法務部（⚖️）

#### Scenario: 選項分組顯示

- **GIVEN** 成員點擊「轉帳給政府部門」按鈕
- **THEN** 下拉選單按層級分組：
  - 最高決策機構：常任理事會
  - 立法機構：最高人民會議
  - 行政機構：國務院、各部門

#### Scenario: 未設定常任理事會時的選項

- **GIVEN** 該 guild 尚未設定常任理事會
- **WHEN** 成員點擊「轉帳給政府部門」按鈕
- **THEN** 下拉選單不顯示常任理事會選項
- **AND** 其他已設定的機構正常顯示

#### Scenario: 未設定最高人民會議時的選項

- **GIVEN** 該 guild 尚未設定最高人民會議
- **WHEN** 成員點擊「轉帳給政府部門」按鈕
- **THEN** 下拉選單不顯示最高人民會議選項
- **AND** 其他已設定的機構正常顯示

#### Scenario: 未設定國務院時的提示

- **GIVEN** 該 guild 尚未設定任何政府機構（常任理事會、最高人民會議、國務院皆未設定）
- **WHEN** 成員點擊「轉帳給政府部門」按鈕
- **THEN** 系統顯示提示訊息「該伺服器尚未設定政府機構」

#### Scenario: 選擇政府機構後彈出 Modal

- **GIVEN** 成員已點擊「轉帳給政府部門」按鈕
- **WHEN** 成員從下拉選單選擇一個機構
- **THEN** 系統彈出轉帳 Modal
- **AND** Modal 包含金額輸入欄位（必填）
- **AND** Modal 包含備註輸入欄位（選填）

#### Scenario: 轉帳給常任理事會成功

- **GIVEN** 成員已選擇常任理事會並填寫金額
- **AND** 成員餘額足夠
- **WHEN** 成員確認轉帳
- **THEN** 系統執行轉帳操作，目標為理事會帳戶（`9_000_000_000_000_000 + guild_id`）
- **AND** 顯示成功訊息，包含轉帳金額、收款機構和新餘額
- **AND** 成功訊息使用配置的貨幣名稱和圖示

#### Scenario: 轉帳給最高人民會議成功

- **GIVEN** 成員已選擇最高人民會議並填寫金額
- **AND** 成員餘額足夠
- **WHEN** 成員確認轉帳
- **THEN** 系統執行轉帳操作，目標為議會帳戶（`9_200_000_000_000_000 + guild_id`）
- **AND** 顯示成功訊息，包含轉帳金額、收款機構和新餘額
- **AND** 成功訊息使用配置的貨幣名稱和圖示

#### Scenario: 轉帳給國務院主帳戶成功

- **GIVEN** 成員已選擇國務院並填寫金額
- **AND** 成員餘額足夠
- **WHEN** 成員確認轉帳
- **THEN** 系統執行轉帳操作，目標為國務院主帳戶（`9_100_000_000_000_000 + guild_id`）
- **AND** 顯示成功訊息，包含轉帳金額、收款機構和新餘額
- **AND** 成功訊息使用配置的貨幣名稱和圖示

#### Scenario: 轉帳給政府部門成功

- **GIVEN** 成員已選擇收款部門（如內政部）並填寫金額
- **AND** 成員餘額足夠
- **WHEN** 成員確認轉帳
- **THEN** 系統執行轉帳操作，目標為該部門的政府帳戶
- **AND** 顯示成功訊息，包含轉帳金額、收款部門和新餘額
- **AND** 成功訊息使用配置的貨幣名稱和圖示

#### Scenario: 轉帳給政府機構失敗 - 餘額不足

- **GIVEN** 成員已選擇收款機構並填寫金額
- **AND** 成員餘額不足
- **WHEN** 成員確認轉帳
- **THEN** 系統拒絕轉帳並顯示「餘額不足」錯誤訊息

## ADDED Requirements

### Requirement: Government Institution Account ID Mapping

個人面板轉帳功能必須（MUST）使用 deterministic 帳戶 ID 映射，確保每個政府機構對應正確的經濟帳戶。

#### Scenario: 常任理事會帳戶 ID 映射

- **WHEN** 成員選擇轉帳給常任理事會
- **THEN** 系統使用帳戶 ID `9_000_000_000_000_000 + guild_id`

#### Scenario: 最高人民會議帳戶 ID 映射

- **WHEN** 成員選擇轉帳給最高人民會議
- **THEN** 系統使用帳戶 ID `9_200_000_000_000_000 + guild_id`

#### Scenario: 國務院主帳戶 ID 映射

- **WHEN** 成員選擇轉帳給國務院
- **THEN** 系統使用帳戶 ID `9_100_000_000_000_000 + guild_id`

#### Scenario: 部門帳戶 ID 映射

- **WHEN** 成員選擇轉帳給特定部門（如內政部，dept_code=1）
- **THEN** 系統使用帳戶 ID `9_500_000_000_000_000 + guild_id * 100 + dept_code`
