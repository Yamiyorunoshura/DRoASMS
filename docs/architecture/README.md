# 架構文件

本目錄包含 DRoASMS 專案的架構設計文件，說明系統的整體結構、模組關係、設計模式與技術決策。

## 文件列表

- [架構概述](overview.md) - 系統整體架構、核心模組與技術棧
- [資料流程](data-flow.md) - 系統主要業務流程的資料流向圖（待撰寫）
- [事件系統](event-system.md) - 事件驅動架構設計與實作（待撰寫）
- [依賴注入容器](di-container.md) - DI 容器的設計與使用方式（待撰寫）
- [性能優化](performance-optimization.md) - Cython 編譯與其他性能優化策略（待撰寫）

## 架構決策記錄

本專案採用以下關鍵架構決策：

1. **分層架構**：清晰分離介面層、業務邏輯層、資料存取層
2. **依賴注入**：統一管理服務依賴，提升可測試性
3. **結果模式**：標準化錯誤處理，避免異常傳播
4. **事件驅動**：鬆耦合模組通訊，支援異步處理
5. **閘道模式**：封裝資料庫操作，隔離業務邏輯與持久化細節

## 設計原則

- **單一職責**：每個模組專注於單一功能領域
- **開閉原則**：透過擴展而非修改增加新功能
- **最小知識原則**：模組僅需知道直接相關的模組
- **依賴倒置**：高層模組不依賴低層模組實現細節

## 擴展指南

當需要擴展系統功能時，請參考以下指南：

1. **新增業務邏輯**：在 `src/bot/services/` 下建立新服務
2. **新增資料存取**：在 `src/db/gateway/` 下建立新閘道
3. **新增 Discord 命令**：在 `src/bot/commands/` 下建立新命令模組
4. **新增事件處理**：在 `src/infra/events/` 下註冊新事件處理器
